<div id="controls" class="leaflet-popup-content-wrapper" style="position:absolute">
    <table class="leaflet-popup-content">
        <tr><td>起始地點: </td><td id="startloc"></td></tr>
        <tr>
            <td>起始時間: </td>
            <td>
                <input type="date" id="startdate"></input>
                <input type="time" id="starttime" step="3600"></input>
            </td>
        </tr>
        <tr>
            <td>結束時間: </td>
            <td>
                <input type="date" id="enddate"></input>
                <input type="time" id="endtime"step="3600"></input>
            </td>
        </tr>
        <tr>
            <td>時間長度: </td>
            <td>
                <input style="width:3.5em" type="number" min="1" value="1">天
                <input style="width:2.5em" type="number" min="1" value="0">小時</input>
            </td>
        </tr>
        <tr><td><button onclick="request_new_path()">產生路徑</button></td></tr>
    <table>
</div>

<style>
#controls {
    font-family: 微軟正黑體, sans-serif;
    position: absolute;
    margin: 0 auto;
    top: 0%;
    z-index: 4;
    overflow: auto;
    display: inline;
}

#controls > * {
    font-family: 微軟正黑體, sans-serif;
    font-size: 1.5vh;
}
</style>

<script>

var controls = $("#controls")[0];

controls.update = function()
{
    var startdate = $("#startdate")[0];
    var starttime = $("#starttime")[0];
    startdate.min = date2str(DATE_MIN);
    startdate.max = date2str(DATE_MAX);
    startdate.value = date2str(Session.startdate);
    starttime.value = time2str(Session.startdate);
    startdate.oninput = starttime.oninput = function(e){ Session.startdate = new Date(`${startdate.value}T${starttime.value}`); };

    var enddate = $("#enddate")[0];
    var endtime = $("#endtime")[0];
    enddate.min = date2str(DATE_MIN);
    enddate.max = date2str(DATE_MAX);
    enddate.value = date2str(Session.enddate);
    endtime.value = time2str(Session.enddate);
    enddate.oninput = endtime.oninput = function(e){ Session.enddate = new Date(`${enddate.value}T${endtime.value}`); };

    $("#startloc")[0].innerText = loc2str(Session.startloc);
}

controls.update();

</script>